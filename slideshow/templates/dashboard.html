{% extends 'layout.html' %}
{% block title %}Übersicht – Slideshow{% endblock %}
{% block content %}
<section class="grid overview-grid">
  <article>
    <h2>Aktueller Status</h2>
    <div class="status-block">
      <h3>Primäre Anzeige</h3>
      <p><strong>Datei:</strong> {{ state.primary_item or '–' }}</p>
      <p><strong>Status:</strong> {{ state.primary_status or 'unbekannt' }}</p>
      <p><strong>Gestartet:</strong> {% if state.primary_started_at %}{{ state.primary_started_at | datetimeformat }}{% else %}–{% endif %}</p>
    </div>
    {% if config.playback.splitscreen_enabled %}
    <div class="status-block">
      <h3>Splitscreen rechts</h3>
      <p><strong>Datei:</strong> {{ state.secondary_item or '–' }}</p>
      <p><strong>Status:</strong> {{ state.secondary_status or 'unbekannt' }}</p>
      <p><strong>Gestartet:</strong> {% if state.secondary_started_at %}{{ state.secondary_started_at | datetimeformat }}{% else %}–{% endif %}</p>
    </div>
    {% endif %}
    <p><strong>Infobildschirm:</strong> {% if state.info_screen %}aktiv{% else %}inaktiv{% endif %}{% if state.info_manual %} (manuell){% endif %}</p>
    <p><strong>Service-Status:</strong> {{ service_status or 'unbekannt' }}</p>
    <p><strong>Autostart:</strong> {% if config.playback.auto_start %}aktiviert{% else %}deaktiviert{% endif %}</p>
  </article>

  <article>
    <h2>Playlist-Vorschau</h2>
    <p class="muted">Die Wiedergabe wird automatisch aus allen aktiv überwachten Quellen aufgebaut. Neu hinzugefügte Dateien werden nach kurzer Zeit ohne manuelle Eingriffe angezeigt.</p>
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Datei</th>
            <th>Quelle</th>
            <th>Typ</th>
          </tr>
        </thead>
        <tbody>
          {% for item in playlist %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ item.path }}</td>
            <td>{{ item.source }}</td>
            <td>{{ item.type }}</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4">Keine Medien gefunden. Bitte prüfen, ob die Quellen erreichbar sind.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <a class="button-link" href="{{ url_for('media_settings') }}">Quellen verwalten</a>
  </article>
</section>
{% endblock %}
